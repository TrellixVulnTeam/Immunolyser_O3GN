{% extends "layout.html" %}

{% block content %}
    
    <div class="custom-control custom-switch">
    <input type="checkbox" class="custom-control-input" id="customSwitch1" onclick="myfunction()">
    <label class="custom-control-label" for="customSwitch1">Percent/Density</label>
  </div>
    <div id="chart" class="chart">
    </div>
    <p class="text-justify">The above histpgram is the peptide length distribution of the the sample(s) uploded.
                            Contaminations and peptides with post translational modifications have been removed.
                            Finally, peptides with the length range from 1 to 30 have been selected. The error bars in case of replicates
                            represents the standard deviation of the number of specifc n-mers across replicates. The swith button at 
                            the top can be used to switch between percent or absolute distribution. The tool icons at the top right corner
                            can be used for more operations. 
    </p>    <!-- D3.js -->

    {% for key, value in seqlogos.items() %}
        <div class="your-class">
        {% for replicate in value %}
                

                <img src="{{ url_for('static',filename='images/{0}/{1}/seqlogos/{2}'.format(experiment_id_date,key,replicate))}}" alt="">
                
        {%endfor%}
        </div>
    {% endfor %}

    <!-- <iframe frameborder='0' noresize='noresize' style='position: absolute; background: transparent; width: 100%; height:100%;' src="{{ iframe }}" frameborder="0"></iframe>
    <h3 ><a href="/">Stumble</a></h3> -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <!-- Plotly.js -->
    <script src="https://d14fo0winaifog.cloudfront.net/plotly-basic.js"></script>
 
    <script type="text/javascript">
        
        
        var graphs = {{peptide_percent | safe}};
        var graphsd = {{peptide_density | safe}};
        
        Plotly.plot('chart',graphs,{});        

        function myfunction(){
            checkbox = document.getElementById('customSwitch1');

        if(checkbox.checked){
            Plotly.newPlot('chart',graphsd,{});                    
        }
        else{
            Plotly.newPlot('chart',graphs,{});                    
        }
        }

        $(document).ready(function(){
        $('.your-class').slick({
        centerMode: true,
        centerPadding: '60px',
        slidesToShow: 3,
        responsive: [
            {
            breakpoint: 768,
            settings: {
                arrows: true,
                centerMode: true,
                centerPadding: '40px',
                slidesToShow: 3
            }
            },
            {
            breakpoint: 480,
            settings: {
                arrows: true,
                centerMode: true,
                centerPadding: '40px',
                slidesToShow: 1
            }
            }
        ]
});
        });
    </script>
{% endblock %}
